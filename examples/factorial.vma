# Compute factorial(12)
# Register contents
# ra = count
# rb = result
main:
	psh 12
	str ra
	psh 1 
	str rb
	
factorial:
	ldr ra  
	jz end # if TOS is zero we have finished and register 2 contains the final result.
	ldr rb # otherwise let result = result * count
	ldr ra
	mul
	str rb

	psh 1 # let count = count - 1
	ldr ra
	sub
	str ra
	jmp factorial # Repeat until count == 0
end:
	ldr rb
	out
	hlt