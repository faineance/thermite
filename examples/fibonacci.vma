# Compute fibonacci sequence

main:
	psh 44 # 44th number is the highest i32 can handle
	str rd

	psh 1
	str ra  # a

	psh 1
	str rb  # b


fibonacci:
	ldr rd
	jz end

	ldr ra 
	ldr rb
	add   
	str rc # c = a + b
	ldr rb 

	str ra # a = b
	ldr rc
	str rb # b = c

	ldr rc
	out   

	psh 1 # let count = count - 1
	ldr rd
	sub
	str rd

	jmp fibonacci
end:
	hlt